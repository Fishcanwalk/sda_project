{% extends "base/base-page.html" %}

{% block content %}
<div class="container mx-auto p-4 space-y-6">
    <!-- Header -->
    <div class="flex justify-between items-center mb-8">
        <div>
            <h1 class="text-4xl font-bold text-base-content">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå</h1>
            <p class="text-base-content/70 mt-2">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á 5 ‡∏£‡∏∞‡∏ö‡∏ö</p>
        </div>
        <a href="{{ url_for('dashboard.index') }}" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            ‡πÑ‡∏õ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
        </a>
    </div>

    <!-- Sensors Status Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
        <!-- Temperature Sensor -->
        <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-all">
            <div class="card-body">
                <div class="flex justify-between items-start mb-4">
                    <h2 class="card-title text-lg">üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</h2>
                    {% if sensors_status.temperature.active %}
                    <div class="badge badge-success gap-2">
                        <div class="w-2 h-2 rounded-full bg-white animate-pulse"></div>
                        Active
                    </div>
                    {% else %}
                    <div class="badge badge-error gap-2">
                        <div class="w-2 h-2 rounded-full bg-white"></div>
                        Inactive
                    </div>
                    {% endif %}
                </div>
                <div class="divider my-2"></div>
                <div class="space-y-2">
                    {% if sensors_status.temperature.value is not none %}
                    <div class="text-2xl font-bold text-orange-500">
                        {{ "%.1f"|format(sensors_status.temperature.value) }}¬∞C
                    </div>
                    {% else %}
                    <div class="text-gray-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                    {% endif %}
                    {% if sensors_status.temperature.last_update %}
                    <div class="text-xs text-base-content/60">
                        ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: {{ sensors_status.temperature.last_update.strftime('%H:%M:%S') }}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Humidity Sensor -->
        <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-all">
            <div class="card-body">
                <div class="flex justify-between items-start mb-4">
                    <h2 class="card-title text-lg">üíß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</h2>
                    {% if sensors_status.humidity.active %}
                    <div class="badge badge-success gap-2">
                        <div class="w-2 h-2 rounded-full bg-white animate-pulse"></div>
                        Active
                    </div>
                    {% else %}
                    <div class="badge badge-error gap-2">
                        <div class="w-2 h-2 rounded-full bg-white"></div>
                        Inactive
                    </div>
                    {% endif %}
                </div>
                <div class="divider my-2"></div>
                <div class="space-y-2">
                    {% if sensors_status.humidity.value is not none %}
                    <div class="text-2xl font-bold text-blue-500">
                        {{ "%.1f"|format(sensors_status.humidity.value) }}%
                    </div>
                    {% else %}
                    <div class="text-gray-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                    {% endif %}
                    {% if sensors_status.humidity.last_update %}
                    <div class="text-xs text-base-content/60">
                        ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: {{ sensors_status.humidity.last_update.strftime('%H:%M:%S') }}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Light Sensor -->
        <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-all">
            <div class="card-body">
                <div class="flex justify-between items-start mb-4">
                    <h2 class="card-title text-lg">üí° ‡πÅ‡∏™‡∏á</h2>
                    {% if sensors_status.light.active %}
                    <div class="badge badge-success gap-2">
                        <div class="w-2 h-2 rounded-full bg-white animate-pulse"></div>
                        Active
                    </div>
                    {% else %}
                    <div class="badge badge-error gap-2">
                        <div class="w-2 h-2 rounded-full bg-white"></div>
                        Inactive
                    </div>
                    {% endif %}
                </div>
                <div class="divider my-2"></div>
                <div class="space-y-2">
                    {% if sensors_status.light.value is not none %}
                    <div class="text-2xl font-bold text-yellow-500">
                        {{ 'ON' if sensors_status.light.value else 'OFF' }}
                    </div>
                    {% else %}
                    <div class="text-gray-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                    {% endif %}
                    {% if sensors_status.light.last_update %}
                    <div class="text-xs text-base-content/60">
                        ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: {{ sensors_status.light.last_update.strftime('%H:%M:%S') }}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Rain Sensor -->
        <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-all">
            <div class="card-body">
                <div class="flex justify-between items-start mb-4">
                    <h2 class="card-title text-lg">üåßÔ∏è ‡∏ù‡∏ô</h2>
                    {% if sensors_status.rain.active %}
                    <div class="badge badge-success gap-2">
                        <div class="w-2 h-2 rounded-full bg-white animate-pulse"></div>
                        Active
                    </div>
                    {% else %}
                    <div class="badge badge-error gap-2">
                        <div class="w-2 h-2 rounded-full bg-white"></div>
                        Inactive
                    </div>
                    {% endif %}
                </div>
                <div class="divider my-2"></div>
                <div class="space-y-2">
                    {% if sensors_status.rain.value is not none %}
                    <div class="text-2xl font-bold text-indigo-500">
                        {{ 'RAINING' if sensors_status.rain.value else 'DRY' }}
                    </div>
                    {% else %}
                    <div class="text-gray-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                    {% endif %}
                    {% if sensors_status.rain.last_update %}
                    <div class="text-xs text-base-content/60">
                        ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: {{ sensors_status.rain.last_update.strftime('%H:%M:%S') }}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Smoke Sensor -->
        <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-all">
            <div class="card-body">
                <div class="flex justify-between items-start mb-4">
                    <h2 class="card-title text-lg">üí® ‡∏Ñ‡∏ß‡∏±‡∏ô</h2>
                    {% if sensors_status.smoke.active %}
                    <div class="badge badge-success gap-2">
                        <div class="w-2 h-2 rounded-full bg-white animate-pulse"></div>
                        Active
                    </div>
                    {% else %}
                    <div class="badge badge-error gap-2">
                        <div class="w-2 h-2 rounded-full bg-white"></div>
                        Inactive
                    </div>
                    {% endif %}
                </div>
                <div class="divider my-2"></div>
                <div class="space-y-2">
                    {% if sensors_status.smoke.value is not none %}
                    <div class="text-2xl font-bold text-red-500">
                        {{ "%.1f"|format(sensors_status.smoke.value) }} ppm
                    </div>
                    {% else %}
                    <div class="text-gray-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                    {% endif %}
                    {% if sensors_status.smoke.last_update %}
                    <div class="text-xs text-base-content/60">
                        ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: {{ sensors_status.smoke.last_update.strftime('%H:%M:%S') }}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Status Summary -->
    <div class="card bg-base-100 shadow-lg">
        <div class="card-body">
            <h3 class="card-title mb-4">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</h3>
            <div class="stats shadow w-full">
                <div class="stat place-items-center">
                    <div class="stat-title">‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå Active</div>
                    <div class="stat-value text-green-500">
                        {% set active_count = [
                            sensors_status.temperature.active,
                            sensors_status.humidity.active,
                            sensors_status.light.active,
                            sensors_status.rain.active,
                            sensors_status.smoke.active
                        ] | select | list | length %}
                        {{ active_count }}/5
                    </div>
                </div>
                <div class="stat place-items-center">
                    <div class="stat-title">‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå Inactive</div>
                    <div class="stat-value text-red-500">
                        {% set inactive_count = 5 - active_count %}
                        {{ inactive_count }}/5
                    </div>
                </div>
                <div class="stat place-items-center">
                    <div class="stat-title">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</div>
                    <div class="stat-value {% if active_count >= 4 %}text-green-500{% elif active_count >= 2 %}text-yellow-500{% else %}text-red-500{% endif %}">
                        {% if active_count == 5 %}‡∏õ‡∏Å‡∏ï‡∏¥
                        {% elif active_count >= 3 %}‡∏û‡∏≠‡πÉ‡∏à
                        {% elif active_count >= 1 %}‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á
                        {% else %}‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô{% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Box -->
    <div class="alert alert-info">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
        <span>‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏à‡∏∞‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤ <strong>Active</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤</span>
    </div>
</div>
{% endblock content %}